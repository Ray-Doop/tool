<!--
  @generated-file-note
  文件：smart-tools-backend/docs/COMMENTING_GUIDE.md
  用途：说明文档
  用途：项目说明/设计文档
  维护：与代码/配置变更保持一致，避免文档与实现脱节
-->
# 代码注释规范（Smart Tools Backend）

本项目要求关键代码必须包含清晰、可维护的注释，重点解释“为什么这么做”以及“边界/约束”，而不是重复显而易见的代码含义。

## 1. 注释的目标

- 让新同学快速理解模块职责与调用链路
- 让后续维护者理解设计取舍与风险点（性能/安全/一致性）
- 让接口使用者明确参数、错误码、返回结构与示例

## 2. 必须写注释的地方

- **每个模块的启动/装配代码**：说明扫描策略、profile 策略、关键开关
- **每个对外 Controller**：说明用途、路径/参数约定、错误处理
- **每个 Service 接口与实现**：说明职责边界、输入输出、幂等性/事务性
- **安全相关代码**：鉴权/放行策略、过滤器顺序、跨域策略、限流策略
- **任务类（task）**：触发时机（启动/定时/异步）、失败策略、幂等与重入
- **任何“非显然”的逻辑**：例如数据兜底、异常吞掉、性能优化、并发控制

## 3. 推荐写法

- Java：优先使用 **Javadoc**（`/** ... */`）描述类/方法的用途与约定
- 配置（YAML）：使用 `#` 注释解释每个分组的目的、敏感项的注入方式
- 关键点写清楚：
  - 为什么需要该逻辑（背景/问题）
  - 约束是什么（输入范围/超时/上限/一致性）
  - 失败会怎样（返回码/重试/降级）

## 4. 不建议的写法

- 不要为每一行都写“翻译式”注释（例如 `i++` 的含义）
- 不要把密钥/账号口令写进注释或示例中（敏感信息必须走环境变量）

